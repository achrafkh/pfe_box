"use strict";function SetStats(e){$("#pending-apps").text(e.pending),$("#resc-apps").text(e.resc),$("#done-apps").text(e.done),$("#total-agents").text(e.agents)}$("#showroom-select").change(function(){$.ajax({url:"/com/getevents",type:"post",dataType:"json",data:{showroom_id:$("#showroom-select").val()},success:function(e){SetStats(e.stats),$("#calendar").fullCalendar("removeEvents"),$("#calendar").fullCalendar("addEventSource",e.events)}})}),$(window).load(function(){var e=$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},eventClick:function(t,n,a){if($("#view-invoice").hasClass("hidden")||$("#view-invoice").addClass("hidden"),$("#create-invoice").hasClass("hidden")||$("#create-invoice").addClass("hidden"),$("#client-name").text(t.client.firstname+" "+t.client.lastname),$("#client-email").text(t.client.email),$("#client-address").text(t.client.address),$("#client-phone").text(t.client.phone),$("#app-date").text(t.start.format("YYYY-MM-DD HH:MM:SS")),$('#status option[value="'+t.status+'"]').prop("selected",!0),"done"==t.status&&null==t.invoice){var s=t.id,i=t.showroom_id,l="/invoice/"+i+"/"+s+"/create";$("#create-invoice").attr("href",l).removeClass("hidden")}if(null!=t.invoice){var s=t.id,i=t.showroom_id,l="/invoice/"+i+"/"+s;$("#view-invoice").attr("href",l).removeClass("hidden")}var o=t._id;$("#show").click(),$("#submit-status").unbind("click").bind("click",function(){var n={id:t.id,status:$("#status").val()};$.ajax({url:"/com/updatestatus",type:"post",dataType:"json",data:n,success:function(t){showAlert("success","Success","Updated Successfuly");var n={_id:o,id:t.event.id,title:t.event.title,client_id:t.event.client_id,showroom_id:t.event.showroom_id,status:$("#status").val(),start:t.event.start_at,end:t.event.end_at,allDay:!1,notes:t.event.notes,color:t.event.color,client:t.event.client};e.fullCalendar("removeEvents",o),e.fullCalendar("renderEvent",n,!1)},error:function(){showAlert("error","error","Something Went Wrong")}}),$("#close-update").click()}),e.fullCalendar("unselect")},selectable:!1,selectHelper:!1,editable:!1,events:evs})});